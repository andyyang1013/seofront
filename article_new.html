<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="jslib/layui/css/layui.css">
    <link rel="stylesheet" href="css/main.css">
    <title>贷财行SEO资讯管理后台系统</title>
    <script src="js/config_tpl.js"></script>
</head>

<body class="layui-layout-body container">
    <div class="layui-layout layui-layout-admin">
        <!-- 头部区域 -->
        <div class="layui-header">
            <h1 class="layui-logo">贷财行SEO资讯管理后台系统</h1>
            <div class="layui-logo layui-logo-sub">欢迎用户超级管理员登录使用！</div>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href="javascript:;">
                        管理员：<span>名字</span>
                    </a>
                </li>
                <li class="layui-nav-item"><a href="javascript:;" onclick="$('.mask-psw').show()">修改密码</a></li>
                <li class="layui-nav-item"><a href="login.html">退出</a></li>
            </ul>
        </div>
        <!-- 左侧导航区域 -->
        <div class="layui-side ">
            <div class="layui-side-scroll">
                <ul class="layui-nav layui-nav-tree" lay-filter="test">
                    <li class="layui-nav-item">
                        <a class="" href="index.html">频道管理</a>
                    </li>
                    <li class="layui-nav-item">
                        <a href="column.html">栏目管理</a>
                    </li>
                    <li class="layui-nav-item layui-this"><a href="article.html">文章管理</a></li>
                    <li class="layui-nav-item"><a href="tag.html">标签管理</a></li>
                </ul>
            </div>
        </div>
        <!-- 右侧内容区域 -->
        <div class="layui-body article-new-body">
            <h2 class="layui-body-title">
                新增文章
            </h2>
            <div class="search-form">
                <form class="layui-form " id="articleNew">
                    <!-- <form class="layui-form " id="articleNew"> -->
                    <div class="layui-form-item fl-33 ">
                        <label class="layui-form-label "><i class="required">*</i>文章名称：</label>
                        <div class="layui-input-block">
                            <input type="text" name="name" required lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item fl-33 ">
                        <label class="layui-form-label "><i class="required">*</i>所属栏目：</label>
                        <div class="layui-input-block">
                            <select name="columnId" lay-filter="aihao" class="column-select">
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item fl-33 cl-b">
                        <label class="layui-form-label "><i class="required">*</i>是否推荐：</label>
                        <div class="layui-input-block">
                            <input type="radio" name="recommend" value="1" title="是">
                            <input type="radio" name="recommend" value="0" title="否" checked="">
                        </div>
                    </div>
                    <div class="layui-form-item fl-33 ">
                        <label class="layui-form-label ">阅读数：</label>
                        <div class="layui-input-block">
                            <input type="text" name="readingNum" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item fl-33  hide">
                        <label class="layui-form-label ">相关文章：</label>
                        <div class="layui-input-block">
                            <select name="relateArticleIds" lay-filter="aihao">
                                <option value="0" selected="">栏目1</option>
                                <option value="1">栏目2</option>
                            </select>
                        </div>
                    </div>
                    <div class="layui-form-item fl-33  cl-b">
                        <label class="layui-form-label ">标题：</label>
                        <div class="layui-input-block">
                            <input type="text" name="title" value="" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item fl-33 ">
                        <label class="layui-form-label ">关键词：</label>
                        <div class="layui-input-block">
                            <input type="text" name="keyword" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item fl-33 ">
                        <label class="layui-form-label ">描述：</label>
                        <div class="layui-input-block">
                            <input type="text" name="desc" placeholder="请输入" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item ">
                        <label class="layui-form-label ">文章标签：</label>
                        <div class="layui-input-block">
                            <input type="text" name="tags" placeholder="请输入" autocomplete="off" class="layui-input" style="width: 550px">
                        </div>
                    </div>
                    <div class="content article-new-content">
                        <p class="article-new-content-t"><i class="required">*</i>文章内容：</p>
                        <div class="ueditor-container" id="editorContainer">
                            <textarea id="layedit" name="content" required lay-verify="content" style="display: none;"></textarea>
                        </div>
                    </div>
                    <div class="article-new-content">
                        <div class="layui-form">
                            <button class="layui-btn layui-btn-normal" lay-submit lay-filter="articleBtn">提交</button>
                            <div class="layui-btn layui-btn-warm preview">预览</div>
                            <div class="layui-btn layui-btn-primary goBack">返回</div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="mask  mask-psw">
            <div class="mask-bg"></div>
            <div class="mask-container">
                <h2>修改密码
                <i class="btn-x closeMask"></i>
                </h2>
                <form class="layui-form ">
                    <div class="layui-form-item">
                        <label class="layui-form-label">原密码：</label>
                        <div class="layui-input-block">
                            <input type="text" name="sourcePassword" required lay-verify="required" placeholder="请输入原密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">新密码：</label>
                        <div class="layui-input-block">
                            <input type="text" name="modifiedPassword" required lay-verify="required" placeholder="请输入新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="layui-form-item ">
                        <label class="layui-form-label">重复密码：</label>
                        <div class="layui-input-block">
                            <input type="text" name="modifiedPasswordTwo" required lay-verify="required" placeholder="请再次输入新密码" autocomplete="off" class="layui-input">
                        </div>
                    </div>
                    <div class="mask-btn-box">
                        <button class="layui-btn layui-btn-normal" lay-submit lay-filter="pswBtn">修改密码</button>
                        <div class="layui-btn layui-btn-primary closeMask">取消</div>
                    </div>
                </form>
            </div>
        </div>
        <div class="mask mask-preview" >
            <div class="mask-bg"></div>
            <div class="mask-container">
                <h2><span>文章预览</span>
                <i class="btn-x closeMask"></i>
                </h2>
                <div class="preview-content"></div>
            </div>
        </div>
    </div>
    </div>
    <script src="jslib/jquery/jquery.min.js"></script>
    <script src="jslib/layui/layui.js"></script>
    <script src="js/main.js"></script>
    <script>
    // 所属项目-下拉列表
        columnSelect()
    layui.use(['element', 'laypage', 'layer', 'layedit', 'form'], function() {
        var element = layui.element,
            laypage = layui.laypage,
            layer = layui.layer,
            form = layui.form,
            layedit = layui.layedit,
            $ = layui.jquery;
        // 图片上传接口
        layedit.set({
            uploadImage: {
                url: ajaxUrl + '/article/uploadImg',
                type: 'post' //默认post
            }
        });
        //构建编辑器
        var index = layedit.build('layedit', {
            tool: [
                'strong' //加粗
                , 'italic' //斜体
                , 'underline' //下划线
                , 'del' //删除线
                , '|' //分割线
                , 'left' //左对齐
                , 'center' //居中对齐
                , 'right' //右对齐
                , 'link' //超链接
                , 'unlink' //清除链接
                , 'image' //插入图片
            ],
            height:500
        });
        // 同步编辑器内容到textarea
        form.verify({
            content: function(value) {
                return layedit.sync(index);
            }
        })
        
        form.render('select','layui-form');
        // 提交
        form.on('submit(articleBtn)', function(data) {
            // data.field - 当前容器的全部表单字段，名值对形式：{name: value}
            if (data.field.content) {
                ajaxBox(data.field, "/article/create", "article.html")
            } else {
                layer.msg('文章内容不得为空', { icon: 5, anim: 6 });
            }
            return false;
        });
        // 预览
        form.on('submit(preview)', function(data) {
            // data.field - 当前容器的全部表单字段，名值对形式：{name: value}
            console.log(data.field)
            return false;
        });
        $(".preview").click(function() {
            var editContent = layedit.getContent(index)
            if(editContent){
                $(".mask-preview").show()
                $(".preview-content").html(layedit.getContent(index))
            }else{
                layer.msg('文章内容不得为空', { icon: 5, anim: 6 });
            }
        })
        // 修改密码
        form.on('submit(pswBtn)', function(data) {
            ajaxBox(data.field, "/account/modifyPassword", "index.html")
            return false;
        });
    });
    </script>
</body>

</html>